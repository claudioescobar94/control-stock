(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{24654:function(){},7186:function(t,e,n){(t.exports=n(56813)).tz.load(n(54102))},56813:function(t,e,n){var r,o,s;s=function(t){"use strict";void 0===t.version&&t.default&&(t=t.default);var e,n,r={},o={},s={},i={},a={};t&&"string"==typeof t.version||P("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var c=t.version.split("."),l=+c[0],u=+c[1];function d(t){return t>96?t-87:t>64?t-29:t-48}function f(t){var e,n=0,r=t.split("."),o=r[0],s=r[1]||"",i=1,a=0,c=1;for(45===t.charCodeAt(0)&&(n=1,c=-1);n<o.length;n++)a=60*a+(e=d(o.charCodeAt(n)));for(n=0;n<s.length;n++)i/=60,a+=(e=d(s.charCodeAt(n)))*i;return a*c}function h(t){for(var e=0;e<t.length;e++)t[e]=f(t[e])}function p(t,e){var n,r=[];for(n=0;n<e.length;n++)r[n]=t[e[n]];return r}function m(t){var e=t.split("|"),n=e[2].split(" "),r=e[3].split(""),o=e[4].split(" ");return h(n),h(r),h(o),function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}(o,r.length),{name:e[0],abbrs:p(e[1].split(" "),r),offsets:p(n,r),untils:o,population:0|e[5]}}function x(t){t&&this._set(m(t))}function j(t,e){this.name=t,this.zones=e}function v(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=e.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function y(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function b(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:t.zone.population!==e.zone.population?e.zone.population-t.zone.population:e.zone.name.localeCompare(t.zone.name)}function g(t){return(t||"").toLowerCase().replace(/\//g,"_")}function z(t){var e,n,o,s;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)r[s=g(n=(o=t[e].split("|"))[0])]=t[e],i[s]=n,function(t,e){var n,r;for(h(e),n=0;n<e.length;n++)a[r=e[n]]=a[r]||{},a[r][t]=!0}(s,o[2].split(" "))}function w(t,e){var n,s=r[t=g(t)];return s instanceof x?s:"string"==typeof s?(s=new x(s),r[t]=s,s):o[t]&&e!==w&&(n=w(o[t],w))?((s=r[t]=new x)._set(n),s.name=i[t],s):null}function _(t){var e,n,r,s;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)r=g((n=t[e].split("|"))[0]),s=g(n[1]),o[r]=s,i[r]=n[0],o[s]=r,i[s]=n[1]}function S(t){return S.didShowError||(S.didShowError=!0,P("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!w(t)}function C(t){var e="X"===t._f||"x"===t._f;return!!(t._a&&void 0===t._tzm&&!e)}function P(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}function O(e){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],o=w(r),s=t.utc.apply(null,n);return o&&!t.isMoment(e)&&C(s)&&s.add(o.parse(s),"minutes"),s.tz(r),s}(l<2||2===l&&u<6)&&P("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),x.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e,n=+t,r=this.untils;for(e=0;e<r.length;e++)if(n<r[e])return e},countries:function(){var t=this.name;return Object.keys(s).filter(function(e){return -1!==s[e].zones.indexOf(t)})},parse:function(t){var e,n,r,o,s=+t,i=this.offsets,a=this.untils,c=a.length-1;for(o=0;o<c;o++)if(e=i[o],n=i[o+1],r=i[o?o-1:o],e<n&&O.moveAmbiguousForward?e=n:e>r&&O.moveInvalidForward&&(e=r),s<a[o]-6e4*e)return i[o];return i[c]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return P("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(t)]},utcOffset:function(t){return this.offsets[this._index(t)]}},y.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.utcOffset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},O.version="0.5.43",O.dataVersion="",O._zones=r,O._links=o,O._names=i,O._countries=s,O.add=z,O.link=_,O.load=function(t){z(t.zones),_(t.links),function(t){var e,n,r,o;if(t&&t.length)for(e=0;e<t.length;e++)n=(o=t[e].split("|"))[0].toUpperCase(),r=o[1].split(" "),s[n]=new j(n,r)}(t.countries),O.dataVersion=t.version},O.zone=w,O.zoneExists=S,O.guess=function(t){return(!n||t)&&(n=function(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t&&t.length>3){var e=i[g(t)];if(e)return e;P("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(t){}var n,r,o,s=function(){var t,e,n,r=new Date().getFullYear()-2,o=new v(new Date(r,0,1)),s=[o];for(n=1;n<48;n++)(e=new v(new Date(r,n,1))).offset!==o.offset&&(s.push(t=function(t,e){for(var n,r;r=((e.at-t.at)/12e4|0)*6e4;)(n=new v(new Date(t.at+r))).offset===t.offset?t=n:e=n;return t}(o,e)),s.push(new v(new Date(t.at+6e4)))),o=e;for(n=0;n<4;n++)s.push(new v(new Date(r+n,0,1))),s.push(new v(new Date(r+n,6,1)));return s}(),c=s.length,l=function(t){var e,n,r,o=t.length,s={},c=[];for(e=0;e<o;e++)for(n in r=a[t[e].offset]||{})r.hasOwnProperty(n)&&(s[n]=!0);for(e in s)s.hasOwnProperty(e)&&c.push(i[e]);return c}(s),u=[];for(r=0;r<l.length;r++){for(o=0,n=new y(w(l[r]),c);o<c;o++)n.scoreOffsetAt(s[o]);u.push(n)}return u.sort(b),u.length>0?u[0].zone.name:void 0}()),n},O.names=function(){var t,e=[];for(t in i)i.hasOwnProperty(t)&&(r[t]||r[o[t]])&&i[t]&&e.push(i[t]);return e.sort()},O.Zone=x,O.unpack=m,O.unpackBase60=f,O.needsOffset=C,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1,O.countries=function(){return Object.keys(s)},O.zonesForCountry=function(t,e){if(!(t=s[t.toUpperCase()]||null))return null;var n=t.zones.sort();return e?n.map(function(t){var e=w(t);return{name:t,offset:e.utcOffset(new Date)}}):n};var E=t.fn;function T(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function N(t){return function(){return this._z=null,t.apply(this,arguments)}}t.tz=O,t.defaultZone=null,t.updateOffset=function(e,n){var r,o=t.defaultZone;if(void 0===e._z&&(o&&C(e)&&!e._isUTC&&(e._d=t.utc(e._a)._d,e.utc().add(o.parse(e),"minutes")),e._z=o),e._z){if(16>Math.abs(r=e._z.utcOffset(e))&&(r/=60),void 0!==e.utcOffset){var s=e._z;e.utcOffset(-r,n),e._z=s}else e.zone(r,n)}},E.tz=function(e,n){if(e){if("string"!=typeof e)throw Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=w(e),this._z?t.updateOffset(this,n):P("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},E.zoneName=T(E.zoneName),E.zoneAbbr=T(E.zoneAbbr),E.utc=N(E.utc),E.local=N(E.local),E.utcOffset=(e=E.utcOffset,function(){return arguments.length>0&&(this._z=null),e.apply(this,arguments)}),t.tz.setDefault=function(e){return(l<2||2===l&&u<9)&&P("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?w(e):null,t};var k=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(k)?(k.push("_z"),k.push("_a")):k&&(k._z=null),t},t.exports?t.exports=s(n(65326)):(r=[n(65326)],void 0===(o=s.apply(e,r))||(t.exports=o))},5914:function(t,e,n){Promise.resolve().then(n.bind(n,41191))},41191:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(9268),o=n(86006),s=n(18962),i=n(43631);n(43655);var a=n(7186),c=n.n(a);let l=()=>{let[t,e]=(0,o.useState)([]),[n,s]=(0,o.useState)(null),[a,l]=(0,o.useState)(""),[u,d]=(0,o.useState)(""),[f,h]=(0,o.useState)(0),[p,m]=(0,o.useState)(""),[x,j]=(0,o.useState)([]),[v,y]=(0,o.useState)([]),b=(0,o.useRef)(null),g=(0,o.useRef)(null),[z,w]=(0,o.useState)(!1),[_,S]=(0,o.useState)();(0,o.useEffect)(()=>{let t=async()=>{try{let t=await (0,i.Xp)();e(t)}catch(t){console.error("Error fetching products:",t)}};t()},[]),(0,o.useEffect)(()=>{b.current.focus()},[]);let C=t=>{m(t.target.value)},P=e=>{e.preventDefault(),""===p.trim()&&j([]);let n=t.filter(t=>t.name.toLowerCase().includes(p.toLowerCase())||t.id.toString().includes(p));j(n),S(!0)},O=t=>{s(t),l(t.salePrice),d(""),setTimeout(()=>{g.current.focus()},0),S(!1)},E=t=>{d(t.target.value)},T=()=>{if(!n||""===u.trim())return;let t=parseInt(u,10);if(isNaN(t)||t<=0)return;let e=t*parseFloat(a);h(f+e),y([...v,{product:n,quantity:t}]),s(null),l(""),d(""),m(""),j([]),b.current.focus()},N=t=>{let e=[...v],n=e.splice(t,1)[0],r=n.quantity*parseFloat(n.product.salePrice);h(f-r),y(e)},k=async()=>{if(0!==v.length)try{await Promise.all(v.map(async t=>{let{product:e,quantity:n}=t,r=parseFloat(e.quantity),o=parseFloat(n);if(isNaN(r)||isNaN(o))throw Error("El stock o la cantidad no son valores num\xe9ricos");let s={...e,quantity:r-o};console.log(s);let i=await fetch("http://localhost:8080/api/products/".concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!i.ok)throw Error("Error al actualizar el producto");let a={...e,quantity:o,date:c()().tz("America/Argentina/Buenos_Aires").format()},l=await fetch("http://localhost:8080/api/ventas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(l.ok){let t=await l.json();console.log("Datos enviados correctamente:",t)}else console.error("Error al enviar los datos:",l.status)})),w(!0),y([]),h(0)}catch(t){console.error("Error al actualizar los productos:",t)}};return(0,r.jsxs)("div",{className:"charge",children:[(0,r.jsxs)("form",{onSubmit:P,className:"search",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar producto por nombre o ID",value:p,onChange:C,ref:b}),(0,r.jsx)("button",{type:"submit",children:"Buscar"})]}),x.length>0&&_&&(0,r.jsxs)("div",{className:"results",children:[(0,r.jsx)("h3",{children:"Resultados de la b\xfasqueda"}),(0,r.jsx)("ul",{children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Producto"}),(0,r.jsx)("th",{children:"Proveedor"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Stock"}),(0,r.jsx)("th",{children:"P. de venta"})]})}),(0,r.jsx)("tbody",{children:x.map(t=>(0,r.jsxs)("tr",{onClick:()=>O(t),className:"resultsSearch",children:[(0,r.jsx)("td",{children:t.name}),(0,r.jsx)("td",{children:t.supplier}),(0,r.jsx)("td",{children:t.description}),(0,r.jsx)("td",{children:t.quantity}),(0,r.jsxs)("td",{children:["$",t.salePrice]})]},t.id))})]})})]}),n&&(0,r.jsxs)("div",{className:"selected",children:[(0,r.jsx)("h3",{children:"Producto seleccionado"}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Producto"}),(0,r.jsx)("th",{children:"Proveedor"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Precio de venta"})]})}),(0,r.jsx)("tbody",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.name}),(0,r.jsx)("td",{children:n.supplier}),(0,r.jsx)("td",{children:n.description}),(0,r.jsxs)("td",{children:["$",n.salePrice]})]})})]}),(0,r.jsx)("input",{className:"inputQuantity",type:"number",value:u,onChange:E,placeholder:"Cantidad",ref:g}),(0,r.jsx)("button",{onClick:T,children:"Agregar al carrito"})]}),v.length>0&&(0,r.jsxs)("div",{className:"selected",children:[(0,r.jsx)("h3",{children:"Carrito de venta"}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Producto"}),(0,r.jsx)("th",{children:"Proveedor"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Cantidad"}),(0,r.jsx)("th",{children:"Precio de venta"}),(0,r.jsx)("th",{children:"Acci\xf3n"})]})}),(0,r.jsx)("tbody",{children:v.map((t,e)=>(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.product.name}),(0,r.jsx)("td",{children:t.product.supplier}),(0,r.jsx)("td",{children:t.product.description}),(0,r.jsx)("td",{children:t.quantity}),(0,r.jsxs)("td",{children:["$",t.product.salePrice]}),(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"delete",onClick:()=>N(e),children:"Eliminar"})})]}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:(0,r.jsx)("hr",{style:{borderTop:"1px solid black"}})})})]},e))})]}),(0,r.jsxs)("p",{className:"totalPrice",children:["Precio total de venta: $",f.toFixed(2)]}),(0,r.jsx)("button",{onClick:k,children:"Cobrar"})]})]})},u=()=>(0,r.jsxs)(s.W,{children:[(0,r.jsx)(s.U,{children:"Cobrar"}),(0,r.jsx)(l,{})]});var d=u},43631:function(t,e,n){"use strict";n.d(e,{dW:function(){return u},b9:function(){return d},Xp:function(){return c},qg:function(){return l},O9:function(){return h},MI:function(){return f}});var r=n(24214);let o={headers:{"content-type":"application/json"}};var s=n(87497),i=n.n(s);let a="http://localhost:8080/api",c=async()=>{try{let t=await r.Z.get("".concat(a,"/products?limit=1000"),o);return t.data.docs}catch(t){console.error(t)}},l=async()=>{try{let t=await r.Z.get("".concat(a,"/ventas?limit=1000"),o);return t.data.docs}catch(t){console.error(t)}},u=async t=>{let{selectRows:e}=t,n=i().stringify({where:{id:{contains:e}}},{addQueryPrefix:!0});try{let t=await fetch("http://localhost:8080/api/products/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}}),e=await t.json();return e}catch(t){console.log(t)}},d=async t=>{let{selectRows:e}=t,n=i().stringify({where:{id:{contains:e}}},{addQueryPrefix:!0});try{let t=await fetch("http://localhost:8080/api/ventas/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}}),e=await t.json();return e}catch(t){console.log(t)}},f=async t=>{try{let e=i().stringify(t),n=await fetch("http://localhost:8080/api/products",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e});if(n.ok){let t=await n.json();console.log("Datos enviados correctamente:",t)}else console.error("Error al enviar los datos:",n.status)}catch(t){console.error("Error de red:",t)}},h=async t=>{try{let e=await fetch("http://localhost:8080/api/products/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});e.ok?(await e.json(),console.log("Producto actualizado:",t)):console.error("Error al actualizar el producto:",e.status)}catch(t){console.log(t)}}},18962:function(t,e,n){"use strict";n.d(e,{U:function(){return a},W:function(){return c}});var r=n(62805),o=n(44445);function s(){let t=(0,r._)(["\n  color: rgb(31 41 55);\n  font-size: 30px;\n  margin: 20px 0;\n\n"]);return s=function(){return t},t}function i(){let t=(0,r._)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  height: 200vh\n"]);return i=function(){return t},t}let a=o.ZP.h1(s()),c=o.ZP.div(i())},43655:function(){}},function(t){t.O(0,[635,534,974,667,139,744],function(){return t(t.s=5914)}),_N_E=t.O()}]);